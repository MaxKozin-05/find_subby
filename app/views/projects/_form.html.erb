<%= form_with model: @project, html: { multipart: true }, class: 'space-y-4' do |f| %>
  <div>
    <%= f.label :title, class: 'block text-sm font-medium' %>
    <%= f.text_field :title, class: 'mt-1 w-full rounded border p-2', required: true %>
  </div>

  <div>
    <%= f.label :description, class: 'block text-sm font-medium' %>
    <%= f.text_area :description, rows: 4, class: 'mt-1 w-full rounded border p-2' %>
  </div>

  <div>
    <%= f.label :photos, class: 'block text-sm font-medium' %>
    <%= f.file_field :photos, multiple: true, accept: 'image/*', class: 'mt-1' %>
    <p class="text-xs text-gray-500 mt-1">You can select multiple images.</p>
  </div>

  <% if @project.persisted? && @project.photos.attached? %>
    <div class="mt-3 grid grid-cols-3 gap-2">
      <% @project.photos.each do |photo| %>
        <div class="rounded overflow-hidden border bg-white">
          <%= image_tag photo.variant(resize_to_fill: [300, 200]), class: 'w-full h-24 object-cover' %>
        </div>
      <% end %>
    </div>
  <% end %>

  <%= f.submit (@project.new_record? ? 'Create Project' : 'Update Project'), class: 'px-4 py-2 rounded bg-black text-white' %>
  <%= link_to 'Cancel', projects_path, class: 'ml-2 px-4 py-2 rounded border' %>
<% end %>
